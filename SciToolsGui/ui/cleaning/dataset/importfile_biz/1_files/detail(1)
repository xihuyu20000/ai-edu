function getFooter(){var n=unescape($("#hid_kLogin_footerUrl").val()),t=$("#footerBox");t.length==1&&$.trim(n)!=""&&$.getJSON(n,function(n){t.html(unescape(n.html))})}function modifyEcpHeader(n){$("#Ecp_header_Help").before("<a  class='ecp_tn-tab' href='//kns.cnki.net/kns/subPage/map.aspx'><i>网站地图<\/i><\/a>");$("#Ecp_header_ChargeCenter").before(mycnkihtml());n&&$(".ecp_top-nav").append(logohtml())}function mycnkihtml(){var t=getUInfoFromECP("utype"),n="<span class='mycnki topItem' id='spanmycnki'>";return n+="<a id='link_mycnki' href='javascript:void(0);' onclick='setmycnkiclass()'>个人书房<i class='ecp_tn-arrow'><\/i><\/a>",n+=t?"<div id='pop_mycnki' class='topItemPop mycnkipop' style='display:none;width:130px;'>":"<div id='pop_mycnki' class='topItemPop mycnkipop' style='display:none;'>",n+="<a class='close' href='javascript:void(0)' onclick='$(this).parent().hide()'>x<\/a>",n+="<div class='klogin_fr'>",n+="<ul class='mlist'>",n+="<li><a href='javascript:void(0)' onclick='openKpc()' target='_blank'>进入 <b>个人书房<\/b> &gt;&gt;<\/a><\/li>",n+="<li><a href='javascript:void(0)' onclick=openKpc('fav_paper')  target='_parent'>我的收藏<\/a><\/li>",n+="<li><a href='javascript:void(0)' onclick=openKpc('history_search')  target='_parent'>我的历史<\/a><\/li>",n+="<li><a href='javascript:void(0)' onclick=openKpc('custom') target='_parent'>我的订阅<\/a><\/li>",n+="<li><a href='javascript:void(0)' onclick=openKpc('citationTracking') target='_parent'>引文跟踪<\/a><\/li>",n+="<li><a href='javascript:void(0)' onclick=openKpc('myAchievement') target='_parent'>我的成果<\/a><\/li>",n+="<\/ul><\/div>",t||(n+="<div class='klogin_fl'>",n+="<ul class='mlist'>",n+="<li class='prompt'><span>您好，登录个人账号可以查看更多信息<\/span><\/li>",n+="<\/ul><\/div>"),n+"<\/div><\/span>"}function openKpc(n){var i=getUInfoFromECP("utype"),t,r;if(!i){alert("您好，登录个人账号可以查看更多信息.");return}if(i!="jf"){alert("尊敬的用户，您好！您需要退出机构账号，登录个人账号，如您还没有个人账号，请您注册个人账号，以方便查询您的异地历史记录.");return}t="";!n||(t="#"+n);r=$("#KPCAPIPATH").val();window.open(r+"/KPC"+t)}function logohtml(){var n="<div class='Logo'>";return n+="<a href='//www.cnki.net'>",n+="<img src='//kns.cnki.net/kns/images/gb/logo.gif' alt='中国知网'>",n+="<img class='logohome' src='//kns.cnki.net/kns/images/gb/home.gif'>",n+"<\/a><\/div>"}function setmycnkiclass(){$("#spanmycnki").toggleClass("topItemCur");$("#pop_mycnki").toggle()}function LoginSucess(n){$.post(APPPATH+"/login/LoginIn",{uid:n.Uid},function(){})}function Ecp_LogoutOptr(){var n=APPPATH+"/login/LoginOut";$.post(n,null,function(){location.reload(!0)})}function getUInfoFromECP(o){var ecpjosn,ecpjosntype;if(!o)return"";if(ecpjosn=GetCookie("Ecp_LoginStuts"),ecpjosn){ecpjosn=decodeURIComponent(ecpjosn);ecpjosntype=eval("("+ecpjosn+")");switch(o){case"uname":return ecpjosntype.UserName;case"utype":return ecpjosntype.UserType;case"sname":return decodeURI(decodeURIComponent(ecpjosntype.ShowName));default:return""}}return""}function SetCookie(n,t,i){if(GetCookie(n)==""||GetCookie(n)==null){var r=new Date;r.setDate(r.getDate()+i);document.cookie=n+"="+escape(t)+(i==null?"":";expires="+r.toGMTString())+"; path=/"}}function GetCookie(n){return document.cookie.length>0&&(c_start=document.cookie.indexOf(n+"="),c_start!=-1)?(c_start=c_start+n.length+1,c_end=document.cookie.indexOf(";",c_start),c_end==-1&&(c_end=document.cookie.length),unescape(document.cookie.substring(c_start,c_end))):""}function cookieDelete(n){var t=new Date;t.setDate(t.getDate()-1);document.cookie=n+"="+GetCookie(n)+";path=/;expires="+t.toGMTString()}function SetNewGuid(){for(var t="",i,n=1;n<=32;n++)i=Math.floor(Math.random()*16).toString(16),t+=i,(n==8||n==12||n==16||n==20)&&(t+="-");return t}function GetCookies(n){var t="[;]*[s]*"+n+"=([^;]*)",i=new RegExp(t);return i.test(document.cookie)?RegExp.$1:""}var dbname,KPCAPIPATH,common;(function(n){var t=function(){},i,r;t.version="1.0";i=null;r=n("#loading");t.getVirtualPath=function(){return i||(i=n("#hidVirtualPath").val()),i};t.getJQLoading=function(){return r};t.toString=function(){return"You are running KXR with version:"+this.version};window.KXR=t})(jQuery);jQuery(function(){SetCookie("cnkiUserKey",SetNewGuid(),3650)});$.getUrlParam=function(n){var i=window.location.search.substr(1),t;return"[object String]"==Object.prototype.toString.call(i)&&"[object String]"==Object.prototype.toString.call(n)?(t=i.match(new RegExp("[?&]"+n+"=([^&]+)","i")),t==null||t.length<1)?"":t[1]:""},function(n){function u(){this.content=n(".content");this.sideb=n(".sidebar-b");this.numBtn=this.content.find(".sup");this.funcBtn=this.content.find(".filename");this.referbox=this.sideb.find(".refer");this.closeBtn=this.sideb.find(".close");this.sidebW=280;this.offBtn=this.sideb.find(".arrow");this.title=this.sideb.find(".tit");this.referList=this.sideb.find(".refer-list");this.scrollRight=new r(this.referbox,{anchorTag:""});this.subbox=this.sideb.find(".subbox");this.sideScroller=this.sideb.find(".side-scroller");this.defaultTop=this.sideScroller.length>0?this.sideScroller.position().top:0;this.p=this.content.find(".data p,.p1,citation");this.zqbox=this.sideb.find(".zqscroller");this.zqboxli=this.zqbox.find("li")}function r(t,i){this.el=t;this.opts=n.extend({Container:".content",anchorTag:".anchor-tag"},i);this.sideList=n(".sidenav-list,.subbox");this.footerH=n(".footer").length>0?n(".footer").outerHeight():0;this.minTop=n(".header").outerHeight(!0)+n(".ecp_top-nav").outerHeight()+5;n("#backtop").hide()}u.prototype={init:function(){var t=this;t.initSubBoxH();t.scrollRight.init();t.OnOff();t.bindCloseBtn();t.bindReferBtn();t.bindFuncBtn();t.scrollFunc();t.bindNavClick();t.bindPOver();n(window).on("scroll resize",function(){t.initSubBoxH();t.referbox.hasClass("fixed")&&(n(window).width()<1200?t.referbox.css("margin-right",n(window).width()-1200+n(window).scrollLeft()+"px"):t.referbox.css("margin-right",0));t.referbox.width(t.referbox.parent().width()-2)})},initSubBoxH:function(){var t=this;subboxH=n(window).height();t.subbox.height(subboxH)},clearScrollTop:function(){var n=this;n.sideScroller.css({top:"","margin-top":0})},OnOff:function(){var t=this;t.offBtn.on("click",function(){t.myAnimate2(n(this),t.sidebW)})},myAnimate2:function(n,t,i){i=i==undefined?!0:i;n.parent().parent().width()==0?(n.siblings().slideDown(10,function(){n.parent().animate({width:t},"fast");n.parent().parent().animate({width:t},"fast")}),n.removeClass("off")):i&&(n.parent().animate({width:"0"},"fast"),n.parent().parent().animate({width:"0"},"fast",function(){n.siblings().slideUp()}),n.addClass("off"))},bindCloseBtn:function(){var n=this;n.closeBtn.click(function(){n.clearScrollTop();n.zqbox.hide();n.title.html("参考文献");n.referbox.removeClass("showrefer onlyshowzq");n.referbox.find("li").removeClass("cur");n.referbox.find(".side-scroller").find(".img-list").length>0&&n.referbox.find(".side-scroller").find(".img-list").remove();n.scrollRight.init()})},getRefIndexV2:function(n){var r=[],u=n.parent("sup").siblings("link"),f,t,i;if(u)return f=n.index(),t=u.eq(f),t.attr("rel")=="bibliography"&&(i=t.attr("href"),i&&r.push(i)),r},getRefIndex:function(n){if(!n)return null;var t,r,f,e,i,u;if(r=n.replace(/(^[^\d]*)|([^\d]*$)/g,""),u={p1:[],p2:[]},r=r.replace(/\uff0c/,","),r.indexOf(",")>0)for(t=r.split(","),i=0;i<t.length;i++)/[^\d+]/.test(t[i])?t[i].indexOf("-")>0&&(r2=t[i].split("-"),f=parseInt(r2[0]),e=parseInt(r2[1]),u.p2.push(f),u.p2.push(e)):u.p1.push(t[i]);else if(r.indexOf("-")>0&&r.indexOf("[")<0)t=r.split("-"),f=parseInt(t[0]),e=parseInt(t[1]),u.p2.push(f),u.p2.push(e);else if(r.indexOf("-")>0&&r.indexOf("[")>0)for(t=r.replace(/\[|]/g,""),t=t.split("-"),i=0;i<t.length;i++)/[^\d+]/.test(t[i])?t[i].indexOf("-")>0&&(r2=t[i].split("-"),f=parseInt(r2[0]),e=parseInt(r2[1]),u.p2.push(f),u.p2.push(e)):u.p1.push(t[i]);else if(r.indexOf("-")<0&&r.indexOf("[")>0)for(t=r.replace(/\[/g,""),t=t.split("]"),i=0;i<t.length;i++)/[^\d+]/.test(t[i])?t[i].indexOf("-")>0&&(r2=t[i].split("-"),f=parseInt(r2[0]),e=parseInt(r2[1]),u.p2.push(f),u.p2.push(e)):u.p1.push(t[i]);else u.p2.push(r);return u},getRefId:function(n,t){var f,e;if(n){var o=this,r=o.getRefIndex(n),s=0,i=0,u;if(r==null)return"";for(i=0;i<r.p1.length;i++)s=r.p1[i],u=r.p1[0],o.referbox.find("li").eq(s-1).addClass(t);if(r.p2.length>0)for(f=r.p2[0],e=r.p2[1],e==undefined&&(e=f),u=f<u||u==undefined?f:u,i=f;i<=e;i++)o.referbox.find("li").eq(i-1).addClass(t);return u}},createAHTML:function(n){var i=n.find("a"),r="",t;return r+="<a href='",r+=i.attr("href")!=undefined&&i.attr("href")!=""?i.attr("href")+"'  target='_blank'>":"javascript:;' class='nohref'>",t=n.text().replace(/(^\s*)|(\s*$)/g,""),n.parents("#a_footnote").length>0&&(t=t.replace(/^\s*[\(\uFF08]*(\d+)[\)\uFF09]*/g,"")),r+(t+"<\/a>")},bindRefSingleTitle:function(t){var i=t.find("link").attr("href"),r=n("#"+i+"");t.attr("data-title",this.createAHTML(r));t.attr("href","javascript:void(0);")},bindRefTitle:function(n){var t="",i=n.parent("sup").siblings("link");t=i&&i.length>0?this.bindMarkLink(n):this.parseLinkNumber(n);n.attr("data-title",t);n.attr("href","javascript:void(0);")},parseLinkNumber:function(t){var u=t.html(),c=this,s="",r,i=0,f,e=0,o,h=/\[.*?\]/;if(u.match(h)!=null&&(u=u.match(h)[0]),/\d+/.test(u)){for(r=c.getRefIndex(u),i=0;i<r.p1.length;i++)f=r.p1[i],o=n("#a_bibliography").find("p").eq(f-1),s+=this.createAHTML(o);if(r.p2.length>0)for(f=r.p2[0],e=r.p2[1],e==undefined&&(e=f),i=f;i<=e;i++)o=n("#a_bibliography").find("p").eq(i-1),s+=this.createAHTML(o);return s}},bindMarkLink:function(t){var r="",i=0,u=0,f;for(refIndexObj=this.getRefIndexV2(t),u=refIndexObj.length,i=0;i<=u;i++)f=n("#"+refIndexObj[i]),r+=this.createAHTML(f);return r},bindReferBtn:function(t){var i=this;t&&n(t).each(function(){i.bindRefSingleTitle(n(this))});i.numBtn.each(function(){i.bindRefTitle(n(this))});i.numBtn.click(function(){i.title.html("参考文献");i.myAnimate2(i.offBtn,i.sidebW,!1);i.referbox.find("li").removeClass("selected");var t=n(this).find("link").attr("href");_id=parseInt(t);i.referbox.find("#"+_id).addClass("selected")})},goToPos:function(n,t){if(t){var i=this;minT=i.subbox.height()-i.subbox.find("h4").height()-i.sideScroller.outerHeight();maxT=i.defaultTop;idPos=t.position().top;calcH=n.offset().top-i.subbox.offset().top;calcH=calcH<maxT?maxT:calcH;goPos=calcH-idPos;i.sideScroller.animate({top:goPos+"px"},200)}},bindPOver:function(){var t=this;t.p.mouseenter(function(i){i.stopPropagation();var r=n(this).find(".sup");n(this).find(".biblio").each(function(){r.push(n(this))});zq=n(this).find(".filename");t.referbox.find("li").removeClass("cur");t.referbox.find("li").removeClass("selected");r.length>0?(r.each(function(){var i,u,r,f;if(n(this).length!=0)if(i=n(this).parent("sup").siblings("link"),i.length==0&&(i=n(this).find("link")),i.length>0)for(r=0;r<i.length;r++)u=n(i[r]).attr("href"),t.referbox.find("li[id="+u+"]").addClass("cur");else f=n(this).html(),t.getRefId(f,"cur")}),t.referbox.find("li.cur").length>0&&(t.title.html("参考文献"),t.zqboxli.removeClass("cur"),t.referbox.removeClass("onlyshowzq").addClass("showrefer"),t.goToPos(n(this),t.referbox.find("li.cur").eq(0))),zq.length>0?(t.zqbox.show(),zq.each(function(){t.zqbox.find("#zq"+n(this).parent().attr("id")).addClass("cur")})):zq.length==0&&t.zqbox.hide()):r.length==0&&zq.length>0?(t.zqbox.show(),t.title.html("附加材料"),t.referbox.removeClass("showrefer").addClass("onlyshowzq"),t.zqboxli.removeClass("cur"),zq.each(function(){thisName=n(this).parents("citation").attr("id");t.zqbox.find("li").each(function(){n(this).attr("id").indexOf(thisName)>-1&&n(this).addClass("cur")})}),t.goToPos(n(this),t.referbox.find("li.cur").eq(0))):t.closeBtn.click()})},bindFuncBtn:function(){var t=this;t.funcBtn.click(function(){t.myAnimate2(t.offBtn,t.sidebW,!1);_this=n(this);thisName=n(this).parents("citation").attr("id");t.zqbox.find("li").each(function(){n(this).attr("id").indexOf(thisName)&&(t.goToPos(_this,n(this)),n(this).addClass("selected"))})})},scrollFunc:function(){var i=this;maxMT=0;i.sideScroller.mousewheel(function(n,r){(minMT=i.subbox.height()-n.outerHeight()-i.subbox.find("h4").height(),minMT>=maxMT)||(t=parseInt(n.css("margin-top"))+20*r,t=t<minMT?minMT:t>maxMT?maxMT:t,n.css("margin-top",t+"px"))});n(window).on("resize",function(){maxT=parseInt(i.sideScroller.css("margin-top"));minMT=i.subbox.height()-i.sideScroller.outerHeight()-i.subbox.find("h4").height();minMT>maxT&&i.sideScroller.css("margin-top",minMT+"px")})},bindNavClick:function(){var t=this;n(".sidenav-list").click(function(){t.closeBtn.click()})}};var i=0;r.prototype={init:function(){var n=this;n.bindscroll();n.anchorClick()},clearEvent:function(){var n=this;n.el.find("a").unbind()},bindscroll:function(){var t=this;n(window).on("load scroll resize",function(){var o=n(document).height(),s=n(t.opts.Container).outerHeight(),r=Math.max(document.body.scrollTop,document.documentElement.scrollTop),f=s+t.minTop,u=n(window).height(),e;(o>u&&r!=0&&n("#backtop").show(),o>u&&r<=0&&n("#backtop").hide(),f-u>t.minTop?r<=t.minTop?t.sideList.height(u+r-t.minTop):r>t.minTop&&r<=f-u?t.sideList.height(u):r>f-u&&t.sideList.height(f-r):r<=t.minTop?t.sideList.height(f-t.minTop):t.sideList.height(f-r),r>t.minTop?t.el.addClass("fixed"):t.el.removeClass("fixed"),i!=1)&&(e=[],n(t.opts.anchorTag)!=undefined&&n(t.opts.anchorTag)!=""&&n(t.opts.anchorTag).length>0&&(n(t.opts.anchorTag).each(function(){minH=r;maxH=minH+n(window).height();var t=n(this).attr("id");if(minH<=n(this).offset().top&&maxH>=n(this).offset().top)return t!=""&&e.push(t),!1}),e.length==1&&t.goalScroll("#"+e[0])))})},anchorClick:function(){var t=this;t.el.find("a").click(function(r){(t.el.hasClass("sidenav")&&r.preventDefault(),r.stopPropagation(),_id=n(this).attr("href"),_id!=undefined&&_id!="#"&&_id.indexOf("#",0)!=-1&&_id!="javascript:void(0)")&&(t.goalScroll(_id),t.el.hasClass("sidenav")&&(i=1),n("body,html").animate({scrollTop:n(_id).offset().top},200,"swing",function(){t.el.hasClass("sidenav")&&setTimeout(function(){i=0},100)}))})},goalScroll:function(n){var t=this;n!=""&&n.indexOf("#",0)!=-1&&(t.el.find("a").removeClass("cur"),t.el.find("a[href='"+n+"']").addClass("cur"))}};window.referfn=u;window.anchorscroll=r}(jQuery);jQuery(function(n){function i(){var t=GetCookies("LID");return t||(t=n("#hid_uid").val()),t}function u(t){var i=n(t).parents(".area_img").find("img").attr("src"),r,u;(n(t).hasClass("table")&&(i=n(t).attr("data-tablename")),i!=undefined&&i!="")&&(r=/=(.*[jpg jpeg bmp png xlsx])&/.exec(i),r)&&(u=r[1],f(i))}function f(n){var t=document.createElement("form");t.id="tempForm";t.action=n.indexOf("http:")>-1?n:APPPATH+"/"+n;t.target="_blank";t.method="post";document.body.appendChild(t);t.submit();document.body.removeChild(t)}function e(t){var u=n(t).parent().find("table"),e,i,o,f,r;u&&u.length!=0||(u=n(t).parents(".area_img").find("table"));e=u.prop("outerHTML");i=n(t).parent().find(".img_tit").html();i&&i.length!=0||(i=n(t).parents(".area_img").find("p.img_tit").text(),i&&n.trim(i).length!=0?(f=/导出到EXCEL/i.exec(i),f.index>0&&(i=i.substr(0,f.index)),i=i.replace(/\s+/ig,"")):(o=(new Date).getTime(),i="Table"+o));r=n(t).parent().find("form");r&&r.length!=0||(r=n(t).parents(".area_img").find("form"));n(r).find("input:eq(0)").val(encodeURIComponent(e));n(r).find("input:eq(1)").val(encodeURIComponent(i));n(r).submit()}function r(){this.navList=n(".sidenav-list");this.leftH=this.navList.outerHeight();this.aTop=0;this.scrollFun()}n.fn.extend({mousewheel:function(t){function f(r){var f=0,u=0,r=r||window.event;+'\v1'?(r.stopPropagation(),r.preventDefault()):(r.cancelBubble=!0,r.returnValue=!1);r.wheelDelta?u=r.wheelDelta:r.deltaY?u=r.deltaY*-1:r.wheelDeltaY?u=r.wheelDeltaY:console.log("get delta,have somethings wrong...");u==0?console.log("get delta,have somethings wrong..."):f=u>0?1:-1;typeof t=="function"?t(n(i),f):""}var u="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i,r;if(this.length!=0)if(i=this[0],i.addEventListener)for(r=u.length;r;)i.addEventListener(u[--r],f,!1);else i.onmousewheel=f}});var t={};t.load=function(){this.x=20;this.y=15;this.tipIDs=[];this.referFN;(n(".sidebar-b").length>0||n("#a_footnote").length>0)&&(this.referFN=new referfn,this.referFN.init());getFooter();this.bind()};t.bind=function(){function o(n,t){n.parent().width()==0?(n.parent().animate({width:t},"fast"),n.parent().parent().animate({width:t},"fast")):(n.parent().animate({width:"0"},"fast"),n.parent().parent().animate({width:"0"},"fast"));n.toggleClass("off");n.parent().toggleClass("off")}var i=this,e,r,f;n(".area_img a.downimg").click(function(){u(n(this))});document.onkeydown=function(n){n=n?n:window.event;n.ctrlKey&&n.keyCode==67&&(n.preventDefault?n.preventDefault():n.returnValue=!1)};n(".guide p>i").click(function(){var t=n(".guide p").index(n(this).parent());n(".guide p").eq(t).siblings("div").slideToggle();n(".guide p").eq(t).parent().toggleClass("selected")});e=n(".sidebar-a").outerWidth();n(".sidebar-a").find(".arrow").click(function(){o(n(this),e)});n(".guide").each(function(){n(this).find("ul").length==0&&n(this).addClass("noico")});n(".sup").mouseenter(function(i){n(".tooltip,footip").remove();t.referFlowShow(i,n(this),"tooltip")});n(document).on("click",function(){for(var t in i.tipIDs)n("#"+i.tipIDs[t]).remove()});r=1;f=[];n("citation").each(function(){var e,u,o;if(n(this).find("link").attr("rel")=="zq")t.dealZqHtml(n(this));else if(n(this).find("link").attr("rel")=="figure"||n(this).find("link").attr("rel")=="mathml"||n(this).find("link").attr("rel")=="table"){var s=n(this).find("link").attr("href"),h=n(this).find("citation").context.innerText,c="<a href='#"+s+"'>"+h+"<\/a>";n(this).replaceWith(c)}else if(n(this).find("a").length==0&&n(this).find("link").attr("rel")=="bibliography")u="<a class='biblio'>"+n(this).html()+"<\/a>",n(this).html(u),i.referFN.bindReferBtn(n(this).find("a")),n(this).find("a").mouseenter(function(i){n(".tooltip,.footip").remove();t.referFlowShow(i,n(this),"tooltip")});else if(n(this).find("link").attr("rel")=="footnote"){e=!1;u="";o=/\"(.*?)\"/.exec(n(this).html())[0];f.forEach(function(n){n.key==o&&(e=!0,u="<a class='fn-tip' href='javascript:void(0)'>"+n.value+"<\/a>")});e==!1&&(f.push({key:o,value:r}),u="<a class='fn-tip' href='javascript:void(0)'>"+r+"<\/a>",r++);n(this).append(u).find("sup").remove();i.referFN.bindRefSingleTitle(n(this));n(this).mouseenter(function(i){n(".tooltip,.footip").remove();t.referFlowShow(i,n(this),"footip")})}})};t.dealZqHtml=function(t){var f,e,i,r,o,u;(n(t).children("link").each(function(){if(n(this).attr("href").length>0){i=n(this).attr("href");var t=i.split("/");t&&(i=t[t.length-1]);e=/.(\w+)$/.exec(i)[1].toLowerCase()}}),i!=undefined)&&(r=n(t).find("link").attr("ftitle"),o=n(t).text(),r||(r=this.getZQTitle(i),r||(r=o)),f="Detail/Redirect?dbcode=cjfd&zqfn="+i+"&type="+e+"&title="+encodeURI(r)+"&filename="+n.getUrlParam("filename"),u="<span id="+n(t).attr("id")+' class="func-group anchor-tag">',u+='<a class="filename" target="_blank" href="'+f+'"><em>'+o+"<\/em><\/a>",u+="<\/span>",n(t).html(u),this.appendZQHtmlToRight(t,f,e,r))};t.appendZQHtmlToRight=function(t,i,r,u){var e=n(t).attr("id"),f=n(".zqscroller ul");this.isExistLi(e,f)||(n("<li id=zq"+e+"><a href="+i+" title='"+u+'\' target="_blank"><em>'+u+"<\/em><\/a><\/li>").appendTo(f),r=="mp4"?n("#audioinfo p").appendTo(f):n("#pdfinfo p").appendTo(f))};t.isExistLi=function(n,t){var i=t.find("li[id=zq"+n+"]");return i.length>0?!0:!1};t.getZQTitle=function(t){var r,i;if(t)return r=/\..*$/ig,t=t.replace(r,""),i="",n(".zq-inner a").each(function(r,u){n(u).attr("href").indexOf(t)>0&&(i=n(u).text())}),n.trim(i)};t.referFlowShow=function(t,i,r){var e,s,o,u,f,h,c;(t.stopPropagation(),n(i).attr("data-title")!=undefined&&n(i).attr("data-title")!="")&&(e=n(i).text(),i.hasClass("biblio")&&(s=/\[\d+\]/g,o=s.exec(n(i).attr("data-title")),o&&(e=o[0])),u=r+e.replace(/\[|\]|,|\(|\)|\s*/g,""),f="",n("#"+u).length==0&&(i.find("a").hasClass("fn-tip")?(h=i.find("a").text(),c=n(i).attr("data-title"),f="<div class='"+r+"' id="+u+">注释"+h+": "+c+"<\/div>"):f="<div class='"+r+"' id="+u+">"+n(i).attr("data-title")+"<\/div>",n("body").append(f),this.tipIDs.push(u)),newLeft=t.pageX+n("."+r).outerWidth()>n(document).width()?t.pageX-n("."+r).outerWidth()+this.x:t.pageX-this.x,n("#"+u).css({top:t.pageY+this.y+"px",left:newLeft+"px"}).show(),n("#"+u).mouseleave(function(){n("#"+u).remove()}))};t.scaleIineImages=function(){function f(f,s){var h=new Image,c=this;h.onload=function(){function f(t){var f=parseInt(n(".content .p1").css("font-size")),r=f*t;r<i/u&&i<300&&(r=i/u);n(s).css("height",r)}if(!(n(c).parents("table").length>0)){var i=h.height;if(i<=t){n(s).css("height",t);return}i>t&&i<=r&&f(e);h.height>r&&f(o)}};this&&this.src.indexOf("Detail/GetImg")<0&&n(this).attr("src","Detail/GetImg?filename="+n(this).attr("href")+"&uid="+i());h.src=this.src}n(".content img[display='inline']").each(f);n(".sidenav-list a img[display='inline']").each(f);var t=25,r=80,u=4,e=1.5,o=3};t.scaleParagraphImages=function(){var r=1500,u=.5,f=.6,t=1200,i=40;n(".content").find(".area_img .pFormula").each(function(e,o){var s=new Image;s.onload=function(){var h=s.width,e;h<=r?(e=h*u,e<i&&(e=i)):(e=h*f,e>t&&(e=t));n(o).css("width",e)};s.src=this.src})};t.scaleParagraphImagesV2=function(){function t(t,i){var u=new Image,f=this;u.onload=function(){var e=u.height,r,t=n("#dpi").val(),f=120;t=parseInt(t);f=t<100?130:100<=t&&t<150?20:150<=t&&t<210?135:150;r=e/t*f;r<22&&(r=22);r>300&&(r=300);n(i).css("height",r)};u.src=r(t,i)}function r(t,r){return r&&r.src.indexOf("Detail/GetImg")<0&&n(r).attr("src","Detail/GetImg?filename="+n(r).attr("href")+"&uid="+i()),n(r).attr("src")}n(".content img[display='inline']").each(t);n(".content img[display='']").each(r);n(".sidenav-list a img[display='inline']").each(t);n(".content").find(".area_img .pFormula").each(t);n(".content table img[display='inline']").each(t)};t.scaleImageWithTitle=function(){n(".content .area_img img:not(.pFormula)").each(function(t,i){n("<img/>").attr("src",this.src).load(function(){var t=this.width,r=this.height;t>1500&&t>3*r&&n(i).css("max-width","75%")})})};t.sideNav=function(){var t=new anchorscroll(n(".sidenav"),{anchorTag:".anchor-tag"});t.init();n(window).on("load scroll resize",function(){var t=n(".sidenav");t.hasClass("fixed")&&n(window).width()<1200&&t.css("left",20-n(window).scrollLeft()+"px")})};r.prototype={scrollFun:function(){var t=this;n(".guide").find("a").click(function(){navTop=t.navList.scrollTop();t.aTop=n(this).position().top;t.aTop>0&&t.aTop<100?t.navList.animate({scrollTop:navTop-100},500,"swing"):t.aTop>t.leftH-100&&t.aTop<t.leftH&&t.navList.animate({scrollTop:navTop+100},500,"swing")})}};new r;t.load();t.sideNav();t.scaleParagraphImagesV2();t.scaleImageWithTitle();window.DownLoadReportExcel=e;n("mathml label").each(function(t,i){n.trim(n(i).html())==""&&n(i).remove("label")});n(".sidenav-list").find("a").mouseenter(function(t){(ev=t||window.event,ev.preventDefault(),n(this).attr("data-title")!=undefined&&n(this).attr("data-title")!="")&&(this.myTitle=n(this).attr("data-title"),this._top=ev.clientY+15,this._left=ev.clientX+10,titlePop=n("<p><\/p>",{id:"showTitleBox"}).css({position:"fixed",top:this._top,left:this._left,"z-index":"1001","max-width":"500px",padding:"0 10px","font-size":"12px","line-height":"24px",border:"1px solid #999","border-radius":"2px","background-color":"#fff"}).html(this.myTitle),n("#showTitleBox").remove(),titlePop.appendTo("body"))}).mouseout(function(){this.myTitle="";n("#showTitleBox").remove()}).click(function(){this.myTitle="";n("#showTitleBox").remove()})});dbname="CJFDTOTAL";KPCAPIPATH=$("#KPCAPIPATH").val(),function(n){var t=function(){},i=n("#myexport").val();t.prototype={load:function(){var t,u;if(this.sort(".sort","cur"),t=n.getUrlParam("TABLEName"),t&&t.length>0&&(dbname=t),n("#aexport").attr("onclick","window.KXR.DetailHeader.SubTurnExport('"+i+"/kns/ViewPage/viewsave.aspx','"+dbname+"!"+n.getUrlParam("filename")+"');return false"),n("#ashoucang").attr("onclick","common.AddFavTitle('');return false"),n("#RefTrack").attr("onclick","common.AddTrack('');return false"),u=navigator.appName,u=="Microsoft Internet Explorer"){var f=navigator.appVersion,e=f.split(";"),r=e[1].replace(/[ ]/g,"");(r=="MSIE6.0"||r=="MSIE7.0"||r=="MSIE8.0")&&(alert("为了更好的体验，建议使用高版本浏览器，请用IE9及以上浏览器！"),n("#aexport").attr("href","javascript:window.KXR.DetailHeader.SubTurnExport('"+i+"/kns/ViewPage/viewsave.aspx','"+dbname+"!"+n.getUrlParam("filename")+"')"),n("#ashoucang").attr("href","javascript:common.AddFavTitle('')"),n("#RefTrack").attr("href","javascript:common.AddTrack('')"))}},sort:function(t,i){n(t).mouseenter(function(){$selectList=n(this).find("ul");$selectList.show();$selectList.find("a").click(function(){$selectList.siblings().find("span").html(n(this).html());n(this).parent().addClass(i).siblings().removeClass(i);$selectList.hide()})}).mouseleave(function(){$selectList.hide()})},SubTurnExport:function(n,t){var i=document.createElement("form"),r;i.method="post";i.setAttribute("target","_blank");i.action=n;r=document.createElement("input");r.setAttribute("name","formfilenames");r.setAttribute("value",t);i.appendChild(r);document.body.appendChild(i);i.submit();document.body.removeChild(i)}};window.KXR.DetailHeader=new t}(jQuery),function(){window.KXR.DetailHeader.load()}(jQuery);common=function(n){var t=n("#myexport").val();return this.RequestJsonObject=function(t,i){function f(n,t,i){var r=navigator.userAgent.indexOf("MSIE")!=-1&&!window.opera;r?t=="load"?(n.onreadystatechange=function(){this.readyState!="loaded"||u||i()},n.onload=function(){i();u=!0}):n.attachEvent("on"+t,function(n){return function(){i.call(n)}}(n)):n.addEventListener(t,i,!1)}function e(n){return document.createElement(n)}var r,u=!1,o;r&&document.body.removeChild(r);r=e("SCRIPT");r.src=t+"&td="+(new Date).getTime();r.charset="utf-8";document.body.appendChild(r);f(r,"load",i);o=n("#myexport").val()},this.Attention=function(){n("#coreContent").css("display")=="none"?(n(".attention div input[type=checkBox]").each(function(){n(this).removeAttr("checked")}),n("#coreContent").css({top:n("#attAuthor").position().top+19}),n("#coreContent").show(),n("#coreContent").unbind("mouseleave").bind("mouseleave",function(){n(".attention div input[type=checkBox]").each(function(){n(this).removeAttr("checked")});n(this).hide()})):n("#coreContent").hide()},this.GetCookie=function(n){var t="[;]*[s]*"+n+"=([^;]*)",i=new RegExp(t);return i.test(document.cookie)?RegExp.$1:""},this.AddFavorite=function(n,t){try{window.external.addFavorite(n,decodeURIComponent(t))}catch(i){try{window.sidebar.addPanel(decodeURIComponent(t),n,"")}catch(i){alert("由于您的浏览器不支持，请使用Ctrl+D进行添加到收藏。")}}},{ShareAction:function(i){var r=n.getUrlParam("dbcode"),u=n.getUrlParam("filename"),f=t+"/CRRS/Services/Share.ashx?dbcode="+r+"&dbname="+dbname+"&filename="+u+"&target=kns&type="+i+"&cnkiUserKey="+GetCookie("cnkiUserKey"),e=f;window.open(e,"kcmstarget","width=480,height=430, menubar=no, scrollbars=no,resizable=yes,location=no, status=no")},AddFavTitle:function(){var t=getUInfoFromECP("uname"),i=getUInfoFromECP("utype"),r=GetCookie("LID");if(!t||!i||i!="jf"){layer.alert("收藏功能仅对个人用户开放，请登录个人账号使用。");return}if(n("#ashoucang").text().indexOf("已收藏")>-1){layer.alert("本篇文献已经收藏，请到个人书房中查看。");return}var u=n.getUrlParam("dbcode"),f=n.getUrlParam("filename"),e=n.getUrlParam("tablename");n.ajax({url:KPCAPIPATH+"/KPCAPI/api/Favorite/AddFav",data:{type:"1",dbCode:u,userId:t,filenameOrBaseid:f,tableName:e,token:r},type:"POST",success:function(t){t.IsOk?(n("#ashoucang").addClass("icon-collected").html("<i><\/i>已收藏"),layer.alert("已收藏本文献,请到个人书房中查看！")):layer.alert(t.Message)}})},isHasAddFav:function(){var t=getUInfoFromECP("uname"),i=getUInfoFromECP("utype"),r=GetCookie("LID");if(t&&i&&i=="jf"){var f=n.getUrlParam("dbcode"),u=n.getUrlParam("filename"),e=n.getUrlParam("tablename");n.ajax({url:KPCAPIPATH+"/KPCAPI/api/Favorite/IsFav",data:{type:"1",userId:t,filenames:u,token:r},type:"GET",success:function(t){!!t.Data&&t.Data.length>0&&t.Data[0].status=="0"&&n("#ashoucang").addClass("icon-collected").html("<i><\/i>已收藏")}})}},AddTrack:function(){var t=getUInfoFromECP("uname"),i=getUInfoFromECP("utype"),u=GetCookie("LID");if(!t||!i||i!="jf"){layer.alert("创建引文跟踪功能仅对个人用户开放，请登录个人账号使用。");return}if(n("#RefTrack").text().indexOf("创建引文跟踪")<0){layer.alert("本篇文献创建引文跟踪成功，请到个人书房中查看。");return}var f=n.getUrlParam("dbcode"),e=n.getUrlParam("filename"),o=n.getUrlParam("tablename"),r=0;n("#CitedTimes").val()!=null&&n("#CitedTimes").val()!=""&&(r=n("#CitedTimes").val());n.ajax({url:KPCAPIPATH+"/KPCAPI/api/CitationTrace/Add",data:{dbCode:f,userId:t,filename:e,tableName:o,CitedTimes:r,token:u},type:"POST",success:function(t){t.IsOk&&t.StateCode=="1"?(n("#RefTrack").addClass("tracked").html("<i><\/i>引文跟踪"),layer.alert("创建引文跟踪成功,请到个人书房中查看！")):layer.alert(t.Message)}})},isHasTrack:function(){var t=getUInfoFromECP("uname"),i=getUInfoFromECP("utype"),r=GetCookie("LID");if(t&&i&&i=="jf"){var f=n.getUrlParam("dbcode"),u=n.getUrlParam("filename"),e=n.getUrlParam("tablename");n.ajax({url:KPCAPIPATH+"/KPCAPI/api/CitationTrace/Exist",data:{userId:t,filename:u,token:r},type:"GET",success:function(t){t.StateCode=="1"&&n("#RefTrack").addClass("tracked").html("<i><\/i>引文跟踪")}})}},CopyURL:function(){var n=new Clipboard(".copy",{text:function(){return location.href}});n.on("success",function(n){layer.alert("已复制到剪切板");n.clearSelection()})},AddWeiXinImage:function(){var t=n.getUrlParam("filename"),i=n.getUrlParam("dbcode"),r="http://"+location.hostname+location.pathname+"?dbcode="+i+"&filename="+t,u="//app.cnki.net/Parts/QRCode/Get?source=Kxreader&text="+encodeURIComponent(r);n(".qrcode img").attr("src",u)}}}(jQuery);$(function(){common.CopyURL();common.isHasAddFav();common.isHasTrack();common.AddWeiXinImage()}),function(){var n=function(){};n.prototype={renderPage:function(n,t,i,r,u){var e=n.attr("totalcount"),f=10,o;e<10||(f==undefined&&(f=10),o=this,$(n).find(".pages").twbsPagination({startPage:parseInt(1),initiateStartPageClick:!1,visiblePages:u,totalPages:Math.ceil(e/f)<1?1:Math.ceil(e/f),onPageClick:function(u,f){DetailRef.getRefPartialHtml(n,f,t,i,r)}}))},getUrlParam:function(n){return $.getUrlParam(n)},getRefHtml:function(n,t,i,r){var u=DetailRef.getUrlParam("dbcode"),o,e,f;if(u=u!=null?u.toUpperCase():"CJFQ",u=="CJFD"&&(u="CJFQ"),o=this,e={0:"Get2CKFile",1:"GetGYFiles",2:"GetYZFiles",3:"Get2YZFiles",4:"GetTBFiles",5:"GetAuthors",6:"GetSimilarFilesDoc",7:"GetKnetFuInfos"},t.html().length<1){if(f=e[i],!f)return;t.html("正在加载...");$.get(APPPATH+"/RefNet/"+f,{dbcode:u,filename:n},function(f){if(t.html(f),i<5){var e=t.find(".refer-box");$.each(e,function(t,f){DetailRef.renderPage($(f),i,u,n,r)})}})}},getRefPartialHtml:function(n,t,i,r,u){var f=n.attr("curdbcode"),e=n.find("ul:eq(0)"),o={0:"Get2CKFilePartial",1:"GetGYFilesPartial",2:"GetYZFilesPartial",3:"Get2YZFilesPartial",4:"GetTBFilesPartial"}[i];$.get(APPPATH+"/RefNet/"+o,{dbcode:r,curdbcode:f,filename:u,page:t},function(n){e.html(n)})}};window.DetailRef=new n}();jQuery(function(n){function i(i){n("#GLSearch").css("display","none");var r=t.Text;r&&(r=r.replace(/[\r\n\s]+$/g,""),n(i).attr("href","http://cidian.cnki.net/cidian/Search/SimpleSearch?range=CNKIDICT&searchtype=Entryword&Key="+encodeURIComponent(r)))}var t={};t.startObj=null;t.endObject=null;t.isdb=!1;t.allow=!0;t.Text="";t.MaxLength=100;t.isallow=function(){t.allow?(t.allow=!1,alert("搜索已关闭")):(t.allow=!0,alert("搜索已打开"))};t.selectTextRegion={};t.dblclick=function(){t.isdb=!0};t.mousedown=function(i){i=i?i:window.event?window.event:"";i&&(t.startObj=i.target?i.target:i.srcElement);var r=n("#GLSearch");r.css("display","none");t.allow=t.startObj.tagName.toUpperCase()=="IMG"&&(t.startObj.parentElement.className=="area_img"||t.startObj.parentElement.parentElement.className=="area_img")?!1:!0};t.mouseup=function(n){var i;if(n=n?n:window.event?window.event:"",n&&(i=n.target?n.target:n.srcElement),!t.IsInChooseTag(t.startObj)){t.endObject=null;return}i.tagName!="INPUT"&&t.startObj&&t.IsInChooseTag(i)&&t.allow&&t.showBtnsDiv(n);t.isdb=!1};t.IsInChooseTag=function(i){return t.endObject==null||i==t.endObject||n.contains(t.endObject,i)};t.showBtnsDiv=function(i){i=i?i:window.event?window.event:"";var r=n("#GLSearch"),f=88,u="";setTimeout(function(){var o,e,s,h;u=t.GetSelectionText();u.toString().length>1?(t.endObject=i.target?i.target:i.srcElement,self.innerWidth?o=self.innerWidth:document.documentElement&&document.documentElement.clientWidth?o=document.documentElement.clientWidth:document.body&&(o=document.body.clientWidth),r.css({display:"block",position:"absolute"}),n.support.leadingWhitespace?(h=document.documentElement.scrollTop>0?document.documentElement.scrollTop:document.body.scrollTop,s=i.pageX+f+r.outerWidth(!0)-o,rY=i.pageY-h+r.outerHeight(!0)<n(window).height()?i.pageY+20:i.pageY-r.outerHeight(!0)-20,e=s>0?i.pageX-r.outerWidth(!0):i.pageX-10):(s=i.clientX+f+r.outerWidth(!0)-o,rY=document.documentElement.scrollTop+i.clientY,e=document.documentElement.scrollLeft+i.clientX,rY=i.clientY+r.outerHeight(!0)<n(window).height()?rY+20:rY-r.outerHeight(!0)-20,e=s>0?e-r.outerWidth(!0):e-10),r.css("top",rY),r.css("left",e),r.css("z-index",2e4),t.Text=u):(r.css("display","none"),t.endObject=null)},1)};t.GetSelectionText=function(){var n,i;return(window.getSelection?n=window.getSelection():document.selection&&(n=document.selection.createRange()),!!n&&!!n.getRangeAt)?(i=n.toString(),i.length>t.MaxLength?i.substr(0,t.MaxLength):i):""};t.copytextToclipboard=function(){var r=document.getElementById("copytext"),i;if(r&&typeof Clipboard=="function"){i=new Clipboard(r,{text:function(){if(t.Text&&t.Text.length>0){var i=t.Text;return t.Text.length>=t.MaxLength&&(i+="[…]\n摘自："+n(".top-title .title").text().trim()+"\n在中国知网查看："+window.location.href+"\n本作品由中国知网负责全球范围内电子版制作与发行。版权所有，侵权必究。"),i}return""}});i.on("success",function(i){function u(){var n=window.clipboardData,t;return n&&(t=n.getData("text"),!t)?!1:!0}if(n("#GLSearch").css("display","none"),u()){var r=t.Text;r&&r.length>0&&layer.alert("内容已成功复制到剪切板");i.clearSelection()}});i.on("error",function(n){console.error("Action:",n.action);console.error("Trigger:",n.trigger)})}};t.setAlignButtonState=function(){var t="icon-cen",i="icon-left",r=GetCookie("style");r=="lt"?(n("."+i).addClass("active"),n("."+t).removeClass("active")):(n("."+t).addClass("active"),n("."+i).removeClass("active"))};n(".textalign a").click(function(){var i=n(this).attr("href"),t=i.match(new RegExp("[?&]align=([^&]+)","i"));if(t==null||t.length<1)return"";cookieDelete("style");SetCookie("style",t[1],3650)});window.searchCRFD=i;n(document).ready(function(){n(document).bind("contextmenu",function(){return!1});n(document).bind("keydown",function(n){return n=n?n:window.event,n.ctrlKey&&n.keyCode==67?!1:void 0});t.copytextToclipboard();t.setAlignButtonState();n(".content").mousedown(t.mousedown).mouseup(t.mouseup)})}),function(n,t,i,r){"use strict";var f=n.fn.twbsPagination,u=function(i,r){var e,u,f;if(this.$element=n(i),this.options=n.extend({},n.fn.twbsPagination.defaults,r),this.options.startPage<1||this.options.startPage>this.options.totalPages)throw new Error("Start page option is incorrect");if(this.options.totalPages=parseInt(this.options.totalPages),isNaN(this.options.totalPages))throw new Error("Total pages option is not correct!");if(this.options.visiblePages=parseInt(this.options.visiblePages),isNaN(this.options.visiblePages))throw new Error("Visible pages option is not correct!");if(this.options.totalPages<this.options.visiblePages&&(this.options.visiblePages=this.options.totalPages),this.options.onPageClick instanceof Function)this.$element.first().on("page",this.options.onPageClick);return this.options.href&&(u=this.options.href.replace(/[-\/\\^$*+?.|[\]]/g,"\\$&"),u=u.replace(this.options.hrefVariable,"(\\d+)"),(e=new RegExp(u,"i").exec(t.location.href))!=null&&(this.options.startPage=parseInt(e[1],10))),f=typeof this.$element.prop=="function"?this.$element.prop("tagName"):this.$element.attr("tagName"),this.$listContainer=f==="UL"?this.$element:n("<ul><\/ul>"),this.$listContainer.addClass(this.options.paginationClass),f!=="UL"&&this.$element.append(this.$listContainer),this.render(this.getPages(this.options.startPage)),this.setupEvents(),this.options.initiateStartPageClick&&this.$element.trigger("page",this.options.startPage),this};u.prototype={constructor:u,destroy:function(){return this.$element.empty(),this.$element.removeData("twbs-pagination"),this.$element.off("page"),this},show:function(n){if(n<1||n>this.options.totalPages)throw new Error("Page is incorrect.");return this.render(this.getPages(n)),this.setupEvents(),this.$element.trigger("page",n),this},buildListItems:function(n){var t=[],r,i,u;for(this.options.first&&t.push(this.buildItem("first",1)),this.options.prev&&(r=n.currentPage>1?n.currentPage-1:this.options.loop?this.options.totalPages:1,t.push(this.buildItem("prev",r))),i=0;i<n.numeric.length;i++)t.push(this.buildItem("page",n.numeric[i]));return this.options.next&&(u=n.currentPage<this.options.totalPages?n.currentPage+1:this.options.loop?1:this.options.totalPages,t.push(this.buildItem("next",u))),this.options.last&&t.push(this.buildItem("last",this.options.totalPages)),t},buildItem:function(t,i){var r=n("<li><\/li>"),f=n("<a><\/a>"),u=null;switch(t){case"page":u=i;r.addClass(this.options.pageClass);break;case"first":u=this.options.first;r.addClass(this.options.firstClass);break;case"prev":u=this.options.prev;r.addClass(this.options.prevClass);break;case"next":u=this.options.next;r.addClass(this.options.nextClass);break;case"last":u=this.options.last;r.addClass(this.options.lastClass)}return r.data("page",i),r.data("page-type",t),r.append(f.attr("href",this.makeHref(i)).html(u)),r},getPages:function(n){var u=[],f=Math.floor(this.options.visiblePages/2),t=n-f+1-this.options.visiblePages%2,i=n+f,r;for(t<=0&&(t=1,i=this.options.visiblePages),i>this.options.totalPages&&(t=this.options.totalPages-this.options.visiblePages+1,i=this.options.totalPages),r=t;r<=i;)u.push(r),r++;return{currentPage:n,numeric:u}},render:function(t){var i=this;this.$listContainer.children().remove();this.$listContainer.append(this.buildListItems(t));this.$listContainer.children().each(function(){var r=n(this),u=r.data("page-type");switch(u){case"page":r.data("page")===t.currentPage&&r.addClass(i.options.activeClass);break;case"first":r.toggleClass(i.options.disabledClass,t.currentPage===1);break;case"last":r.toggleClass(i.options.disabledClass,t.currentPage===i.options.totalPages);break;case"prev":r.toggleClass(i.options.disabledClass,!i.options.loop&&t.currentPage===1);break;case"next":r.toggleClass(i.options.disabledClass,!i.options.loop&&t.currentPage===i.options.totalPages)}})},setupEvents:function(){var t=this;this.$listContainer.find("li").each(function(){var i=n(this);if(i.off(),i.hasClass(t.options.disabledClass)||i.hasClass(t.options.activeClass)){i.on("click",!1);return}i.click(function(n){t.options.href||n.preventDefault();t.show(parseInt(i.data("page")))})})},makeHref:function(n){return this.options.href?this.options.href.replace(this.options.hrefVariable,n):"#"}};n.fn.twbsPagination=function(t){var o=Array.prototype.slice.call(arguments,1),f,e=n(this),i=e.data("twbs-pagination"),s=typeof t=="object"&&t;return i||e.data("twbs-pagination",i=new u(this,s)),typeof t=="string"&&(f=i[t].apply(i,o)),f===r?e:f};n.fn.twbsPagination.defaults={totalPages:0,startPage:1,visiblePages:5,initiateStartPageClick:!0,href:!1,hrefVariable:"{{number}}",first:"首页",prev:"上一页",next:"下一页",last:"末页",loop:!1,onPageClick:null,paginationClass:"pagination",nextClass:"next",prevClass:"prev",lastClass:"last",firstClass:"first",pageClass:"page",activeClass:"active",disabledClass:"disabled"};n.fn.twbsPagination.Constructor=u;n.fn.twbsPagination.noConflict=function(){return n.fn.twbsPagination=f,this}}(window.jQuery,window,document);!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this;t.Clipboard=n()}}(function(){var n;return function n(t,i,r){function u(f,o){var h,c,s;if(!i[f]){if(!t[f]){if(h="function"==typeof require&&require,!o&&h)return h(f,!0);if(e)return e(f,!0);c=new Error("Cannot find module '"+f+"'");throw c.code="MODULE_NOT_FOUND",c;}s=i[f]={exports:{}};t[f][0].call(s.exports,function(n){var i=t[f][1][n];return u(i||n)},s,s.exports,n,t,i,r)}return i[f].exports}for(var e="function"==typeof require&&require,f=0;f<r.length;f++)u(r[f]);return u}({1:[function(n,t){function r(n,t){for(;n&&n.nodeType!==u;){if("function"==typeof n.matches&&n.matches(t))return n;n=n.parentNode}}var u=9,i;"undefined"==typeof Element||Element.prototype.matches||(i=Element.prototype,i.matches=i.matchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector);t.exports=r},{}],2:[function(n,t){function i(n,t,i,u,f){var e=r.apply(this,arguments);return n.addEventListener(i,e,f),{destroy:function(){n.removeEventListener(i,e,f)}}}function r(n,t,i,r){return function(i){i.delegateTarget=u(i.target,t);i.delegateTarget&&r.call(n,i)}}var u=n("./closest");t.exports=i},{"./closest":1}],3:[function(n,t,i){i.node=function(n){return void 0!==n&&n instanceof HTMLElement&&1===n.nodeType};i.nodeList=function(n){var t=Object.prototype.toString.call(n);return void 0!==n&&("[object NodeList]"===t||"[object HTMLCollection]"===t)&&"length"in n&&(0===n.length||i.node(n[0]))};i.string=function(n){return"string"==typeof n||n instanceof String};i.fn=function(n){return"[object Function]"===Object.prototype.toString.call(n)}},{}],4:[function(n,t){function r(n,t,r){if(!n&&!t&&!r)throw new Error("Missing required arguments");if(!i.string(t))throw new TypeError("Second argument must be a String");if(!i.fn(r))throw new TypeError("Third argument must be a Function");if(i.node(n))return u(n,t,r);if(i.nodeList(n))return f(n,t,r);if(i.string(n))return e(n,t,r);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList");}function u(n,t,i){return n.addEventListener(t,i),{destroy:function(){n.removeEventListener(t,i)}}}function f(n,t,i){return Array.prototype.forEach.call(n,function(n){n.addEventListener(t,i)}),{destroy:function(){Array.prototype.forEach.call(n,function(n){n.removeEventListener(t,i)})}}}function e(n,t,i){return o(document.body,n,t,i)}var i=n("./is"),o=n("delegate");t.exports=r},{"./is":3,delegate:2}],5:[function(n,t){function i(n){var t,r,i,u;return"SELECT"===n.nodeName?(n.focus(),t=n.value):"INPUT"===n.nodeName||"TEXTAREA"===n.nodeName?(r=n.hasAttribute("readonly"),r||n.setAttribute("readonly",""),n.select(),n.setSelectionRange(0,n.value.length),r||n.removeAttribute("readonly"),t=n.value):(n.hasAttribute("contenteditable")&&n.focus(),i=window.getSelection(),u=document.createRange(),u.selectNodeContents(n),i.removeAllRanges(),i.addRange(u),t=i.toString()),t}t.exports=i},{}],6:[function(n,t){function i(){}i.prototype={on:function(n,t,i){var r=this.e||(this.e={});return(r[n]||(r[n]=[])).push({fn:t,ctx:i}),this},once:function(n,t,i){function r(){u.off(n,r);t.apply(i,arguments)}var u=this;return r._=t,this.on(n,r,i)},emit:function(n){var r=[].slice.call(arguments,1),i=((this.e||(this.e={}))[n]||[]).slice(),t=0,u=i.length;for(t;t<u;t++)i[t].fn.apply(i[t].ctx,r);return this},off:function(n,t){var u=this.e||(this.e={}),r=u[n],f=[],i,e;if(r&&t)for(i=0,e=r.length;i<e;i++)r[i].fn!==t&&r[i].fn._!==t&&f.push(r[i]);return f.length?u[n]=f:delete u[n],this}};t.exports=i},{}],7:[function(t,i,r){!function(u,f){if("function"==typeof n&&n.amd)n(["module","select"],f);else if(void 0!==r)f(i,t("select"));else{var e={exports:{}};f(e,u.select);u.clipboardAction=e.exports}}(this,function(n,t){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}function u(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var i=r(t),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),o=function(){function n(t){u(this,n);this.resolveOptions(t);this.initSelection()}return e(n,[{key:"resolveOptions",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=n.action;this.container=n.container;this.emitter=n.emitter;this.target=n.target;this.text=n.text;this.trigger=n.trigger;this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,r="rtl"==document.documentElement.getAttribute("dir"),n;this.removeFake();this.fakeHandlerCallback=function(){return t.removeFake()};this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0;this.fakeElem=document.createElement("textarea");this.fakeElem.style.fontSize="12pt";this.fakeElem.style.border="0";this.fakeElem.style.padding="0";this.fakeElem.style.margin="0";this.fakeElem.style.position="absolute";this.fakeElem.style[r?"right":"left"]="-9999px";n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px";this.fakeElem.setAttribute("readonly","");this.fakeElem.value=this.text;this.container.appendChild(this.fakeElem);this.selectedText=i.default(this.fakeElem);this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null);this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=i.default(this.target);this.copyText()}},{key:"copyText",value:function(){var n=void 0;try{n=document.execCommand(this.action)}catch(t){n=!1}this.handleResult(n)}},{key:"handleResult",value:function(n){this.emitter.emit(n?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus();window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=n,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"');},get:function(){return this._action}},{key:"target",set:function(n){if(void 0!==n){if(!n||"object"!==(void 0===n?"undefined":f(n))||1!==n.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&n.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(n.hasAttribute("readonly")||n.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=n}},get:function(){return this._target}}]),n}();n.exports=o})},{select:5}],8:[function(t,i,r){!function(u,f){if("function"==typeof n&&n.amd)n(["module","./clipboard-action","tiny-emitter","good-listener"],f);else if(void 0!==r)f(i,t("./clipboard-action"),t("tiny-emitter"),t("good-listener"));else{var e={exports:{}};f(e,u.clipboardAction,u.tinyEmitter,u.goodListener);u.clipboard=e.exports}}(this,function(n,t,i,r){"use strict";function u(n){return n&&n.__esModule?n:{"default":n}}function e(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function o(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}function s(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}function f(n,t){var i="data-clipboard-"+n;if(t.hasAttribute(i))return t.getAttribute(i)}var h=u(t),c=u(i),l=u(r),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},v=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),y=function(n){function t(n,i){e(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.resolveOptions(i),r.listenClick(n),r}return s(t,n),v(t,[{key:"resolveOptions",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof n.action?n.action:this.defaultAction;this.target="function"==typeof n.target?n.target:this.defaultTarget;this.text="function"==typeof n.text?n.text:this.defaultText;this.container="object"===a(n.container)?n.container:document.body}},{key:"listenClick",value:function(n){var t=this;this.listener=l.default(n,"click",function(n){return t.onClick(n)})}},{key:"onClick",value:function(n){var t=n.delegateTarget||n.currentTarget;this.clipboardAction&&(this.clipboardAction=null);this.clipboardAction=new h.default({action:this.action(t),target:this.target(t),text:this.text(t),container:this.container,trigger:t,emitter:this})}},{key:"defaultAction",value:function(n){return f("action",n)}},{key:"defaultTarget",value:function(n){var t=f("target",n);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(n){return f("text",n)}},{key:"destroy",value:function(){this.listener.destroy();this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],i="string"==typeof n?[n]:n,t=!!document.queryCommandSupported;return i.forEach(function(n){t=t&&!!document.queryCommandSupported(n)}),t}}]),t}(c.default);n.exports=y})},{"./clipboard-action":7,"good-listener":4,"tiny-emitter":6}]},{},[8])(8)})